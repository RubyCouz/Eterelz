{% extends'base.html.twig' %}

{% block title %}Votre panier{% endblock %}

{% block body %}

<div>
    <h1 id="panier">Votre panier</h1>
</div>

{% if items | length > 0 %}
<div id="table1">
    <table class="table">
        <thead>
            <tr>
                <th id="image_panier1"></th>
                <th id="produits2">Produit</th>
                <th id="prix">Prix</th>
                <th id="quantite">Quantité</th>
                <th id="total">Total</th>
                <th id="supp"></th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
                <tr>
                    <td><img id="image_panier" class="img-fluid rounded" src="{{ asset('img/upload/product/' ~ item.product.productImage) }}"></td>
                    <td>{{ item.product.productTitle }}</td>
                    <td><input type="text" id="price" value="{{ item.product.productPrice | number_format(2,',','.') }}"> &euro;</td>
                    <td>
                        <button id="moins" class="btn btn-info" onclick="cartupdatemoins()">-</button>
                        <input type="text" id="qty" value="{{ item.quantity }}">
                        <button id="plus" class="btn btn-info" onclick="cartupdateplus()">+</button>
                    </td>
                    <td><input type="text" id="calculprix" value="{{ (item.product.productPrice * item.quantity) | number_format(2,',','.') }}"> &euro;</td>
                    <td id="supprimer"><a href="{{ path('cart_remove', {'id': item.product.id}) }}" class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></a></td>
                </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td></td>
                <td colspan="3" class="text-right">Total :</td>
                <td id="text-right">{{ total | number_format(2,',','.') }} &euro;</td>
                <td><a href="#" class="btn btn-success"><i class="fas fa-check-circle mr-2"></i>Valider</a></td>
            </tr>
        </tfoot>
    </table>
</div>
    <div id="boutique">
        <a href="{{ path('product_index') }}" class="btn btn-info"><i class="fas fa-arrow-circle-left mr-2"></i></i>Retour à la boutique</a>
    </div>
{% else %}
    <p id="panier_vide">Votre panier est vide !</p>
        <div id="boutique">
            <a id="boutique" href="{{ path('product_index') }} " class="btn btn-info">
                <i class="fas fa-shopping-cart mr-1"></i>
                Boutique
            </a>
        </div>
{% endif %}

    {# Essai JavaScript pour mettre à jour le prix selon quantité #}

{% for item in items %}
    <script>
        function cartupdateplus(){
            var qty = document.getElementById('qty').value;
            var calcul = document.getElementById('calculprix').value;
            var price = document.getElementById('price').value;
            qty++;
            calcul = price * qty;
        }

        function cartupdatemoins(){
            (document.getElementById('qty').value)--;
        }
    </script>
    {% endfor %}
{% endblock %}

